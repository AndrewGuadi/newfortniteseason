{% extends 'base.html' %}

{% block meta %}
<meta name="description" content="Visit the Fortnite Season 5 Chapter 3 Shop. Get exclusive merchandise and stay tuned for more products.">
<meta name="keywords" content="Fortnite, Season 5 Chapter 3, Fortnite Shop, Merchandise">
<meta name="csrf-token" content="{{ csrf_token() }}">
{% endblock %}

{% block title %}Fortnite Season 5 Chapter 3 - Shop{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/shop.css') }}">
{% endblock %}

{% block content %}
<div class="container mt-5" id="main">
  <div class="shop-container text-center p-3 bg-dark rounded">
    <h1 class="fs-1">Fortnite Season 5 Chapter 3 Shop</h1>
    <p class="fs-4">Explore exclusive Fortnite merchandise and gear up for the new season.</p>

    <div class="container">
      <!-- Flash messages -->
      <div id="flash-messages">
          {% with messages = get_flashed_messages() %}
              {% if messages %}
                  <div class="alert alert-success">
                      {% for message in messages %}
                          {{ message }}
                      {% endfor %}
                  </div>
              {% endif %}
          {% endwith %}
      </div>
    <div class="row mt-4">
      <div class="col-md-6">
        <div class="card">
          <img src="{{ url_for('static', filename='img/shirt1.webp') }}" class="card-img-top" alt="Fortnite Shirt 1">
          <div class="card-body">
            <h5 class="card-title">Llama Leisure - Winning in Style</h5>
            <p class="card-text">$19.99</p>
            <select id="size-select-1">
              <option value="">Select Size</option>
              <option value="S">Small</option>
              <option value="M">Medium</option>
              <option value="L">Large</option>
              <option value="XL">Extra Large</option>
            </select>
            <button id="payment-button-1" class="btn btn-primary" onclick="submitOrder(1)">Buy Now</button>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="card">
          <img src="/static/img/shirt2.webp" class="card-img-top" alt="Fortnite Shirt 2">
          <div class="card-body">
            <h5 class="card-title">Cyber Warrior - Neon Nights</h5>
            <p class="card-text">$19.99</p>
            <select id="size-select-2">
              <option value="">Select Size</option>
              <option value="S">Small</option>
              <option value="M">Medium</option>
              <option value="L">Large</option>
              <option value="XL">Extra Large</option>
            </select>
            <button id="payment-button-2" class="btn btn-primary" onclick="submitOrder(2)">Buy Now</button>
          </div>
        </div>
      </div>
    </div>
    <p class="fs-4 mt-4">More products are coming soon. Stay tuned!</p>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function submitOrder(shirtNumber) {
    var sizeSelect = document.getElementById('size-select-' + shirtNumber);
    var selectedSize = sizeSelect.value;
    var paymentUrl;

    if (shirtNumber === 1) {
      paymentUrl = 'https://buy.stripe.com/eVaaHr7HG3NoemQfYY';
    } else if (shirtNumber === 2) {
      paymentUrl = '#';
    }

    if (!selectedSize) {
      flashMessage('Please select a size.');
    } else {
      window.location.href = paymentUrl;
    }
  }

  function flashMessage(message) {
    var flashMessagesDiv = document.getElementById('flash-messages');
    flashMessagesDiv.innerHTML = '<div class="alert alert-danger">' + message + '</div>';
    setTimeout(function() {
      flashMessagesDiv.innerHTML = '';
    }, 3000);  // Remove the message after 3 seconds
  }
</script>
{% endblock %}
